#!/bin/bash
set -e

echo "üßπ Railway Cache Clearing Guide"
echo "============================="
echo ""
echo "STEP 1: Add Cache-Clearing Environment Variable"
echo "1. Go to Railway Dashboard: https://railway.app"
echo "2. Select your service: what-is-my-delta-site-production"
echo "3. Click 'Variables' tab"
echo "4. Click 'New Variable'"
echo "5. Add:"
echo "   Variable Name: RAILWAY_DISABLE_BUILD_CACHE"
echo "   Value: true"
echo "6. Save the variable"
echo ""
echo "STEP 2: Force Fresh Deployment"
echo "Option A - Command Palette:"
echo "1. Press CMD + K in Railway dashboard"
echo "2. Type 'Deploy Latest Commit'"
echo "3. Select and execute"
echo ""
echo "Option B - Manual Redeploy:"
echo "1. Go to 'Deployments' tab"
echo "2. Find latest deployment"
echo "3. Click three dots (...)"
echo "4. Select 'Redeploy'"
echo ""
echo "‚è±Ô∏è  After deployment completes (2-3 minutes):"
echo "Test: curl https://what-is-my-delta-site-production.up.railway.app/config"
echo ""
echo "Expected result: JSON with apiBase and schemaVersion (not 404)"