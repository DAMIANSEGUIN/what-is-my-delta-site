<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>What is my Delta?</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <header class="container">
    <h1>What is my Delta?</h1>
    <p class="tagline">A guided intro flow to define your problem, design a small experiment, and move forward.</p>
  </header>

  <main class="container">
    <section id="try-coachai" class="card">
      <h2>Try CoachAI</h2>
      <p>Paste your chat widget embed (Voiceflow or similar) below. The placeholder will be replaced by your embed script.</p>
      <div id="chat-embed" class="embed-placeholder">
        <!-- Paste your Voiceflow (or other) widget embed script here -->
        <p class="muted">Embed goes here. Until then, use the guided flow below.</p>
      </div>
    </section>

    <section id="ab-controls" class="card">
      <h3>A/B Variant</h3>
      <p>Current: <span id="variant-label">A</span></p>
      <div class="row">
        <button id="setA" class="btn">Use Variant A (Linear Wizard)</button>
        <button id="setB" class="btn">Use Variant B (Conversational)</button>
      </div>
      <p class="muted">Variants are also selectable via URL: <code>?variant=A</code> or <code>?variant=B</code></p>
    </section>

    <section id="flow" class="card">
      <h2>PS101 Intro Flow</h2>
      <div id="flow-root"></div>
    </section>

    <section id="csvlib" class="card">
      <h3>Prompt Library (CSV)</h3>
      <p class="muted">Upload your CSV of <code>prompt,completion</code> pairs. Parsing happens locally in your browser — nothing is uploaded. If <code>assets/prompts.csv</code> exists, it will auto-load.</p>
      <div class="row" style="align-items:center;gap:8px;">
        <input type="file" id="csv-file" accept=".csv" class="input" style="max-width:320px;">
        <button id="clear-csv" class="btn btn-secondary">Clear</button>
      </div>
      <p id="csv-status" class="muted" style="margin-top:8px;"></p>
      <div id="csv-preview" style="overflow:auto; max-height:220px; margin-top:8px;"></div>
    </section>


    <section id="resources" class="card">
      <h3>Resources & Downloads</h3>
      <p class="muted">Grab the core materials or export your data.</p>
      <ul>
        <li><a href="assets/PS101_Intro_and_Prompts.docx" download>Download PS101 Intro & Prompts (.docx)</a></li>
        <li><a href="assets/PS101_Intro_and_Resources.docx" download>Download PS101 Intro & Resources (.docx)</a></li>
        <li><a href="assets/prompts.csv" download>Download Prompt Library (prompts.csv) — public if present</a></li>
      </ul>
      <div class="row">
        <button id="export-md2" class="btn">Download Transcript.md</button>
        <button id="export-json" class="btn btn-secondary">Download Session JSON</button>
      </div>
    </section>

    <section id="consent" class="card">
      <h3>Consent & Data Use</h3>
      <p class="muted">Choose what you allow. Defaults keep everything on this device only.</p>
      <div>
        <label><input type="checkbox" id="opt-personal" /> Save my profile on this device for personalization</label>
      </div>
      <div>
        <label><input type="checkbox" id="opt-share" /> Share anonymized session to improve the system (owner-only access)</label>
      </div>
      <div>
        <label><input type="checkbox" id="opt-email" /> Email me a transcript after sessions (requires email later)</label>
      </div>
      <p class="muted" id="consent-status"></p>
    </section>

    <section id="prompt-viewer" class="card">
      <h3>Prompt Library Viewer</h3>
      <div class="row" style="gap:8px;">
        <input type="text" id="pv-search" class="input" placeholder="Search prompts..." style="max-width:320px;">
        <span class="muted" id="pv-count"></span>
      </div>
      <div id="pv-table" style="overflow:auto; max-height:300px; margin-top:8px;"></div>
    </section>


    <section id="export" class="card">
      <h3>Export Your Session</h3>
      <div class="row">
        <button id="export-md" class="btn">Download Markdown</button>
        <button id="reset" class="btn btn-secondary">Reset</button>
      </div>
    </section>
  </main>

  <footer class="container">
    <p class="muted">© 2025 What is my Delta?</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="assets/app.js"></script>
<script type="text/javascript">var Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date();(function(){var s1=document.createElement("script");s1.async=true;s1.src="https://embed.tawk.to/68a767d97ebce11927982120/1j36uravb";s1.charset="UTF-8";s1.setAttribute("crossorigin","*");var s0=document.getElementsByTagName("script")[0];s0.parentNode.insertBefore(s1,s0);})();</script>
<script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="37669e51-8fd7-4b2b-8c69-9a008bb9b0c6";(function(){var d=document,s=d.createElement(script);s.src=https://client.crisp.chat/l.js;s.async=1;d.getElementsByTagName(head)[0].appendChild(s);})();</script></body>
</html>
